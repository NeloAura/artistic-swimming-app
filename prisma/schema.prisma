generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Club {
  id           Int           @id @default(autoincrement())
  name         String?       @unique
  cellPhone    String?
  email        String?
  participants Participant[]
}

model Competition {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  participants Participant[]
  users        User[]
}

model Event {
  id           Int           @id @default(autoincrement())
  event        String        @unique
  participants Participant[]
  groups       Groups[]
  scores       Score[]
}

model Participant {
  id              Int           @id @default(autoincrement())
  clublink        Club          @relation(fields: [clublinkId], references: [id])
  clublinkId      Int
  lastName        String?
  firstName       String?
  birthYear       DateTime?
  division        String?
  age_category    String?
  Country         String?
  generatedNumber Int?
  competitions    Competition[]
  events          Event[]
  groups          Groups[]

  @@unique([id])
}

model Score {
  id                 Int    @id @default(autoincrement())
  eventlink          Event  @relation(fields: [eventlinkId], references: [id])
  eventlinkId        Int
  execution          Float?
  difficulty         Float?
  artisticExpression Float?
  artisticImpression Float?
  total              Float?
  users              User[]
}

model User {
  id           Int           @id @unique @default(autoincrement())
  name         String?
  username     String?       @unique
  password     String?
  role         String?
  competitions Competition[]
  scores       Score[]
  configurations Configuration[]
}

model Groups {
  id              Int           @id @default(autoincrement())
  groupName       String?
  generatedNumber Int?
  events          Event[]
  participants    Participant[]
}

model Configuration {
  id           Int           @id @default(autoincrement())
  name         String        @unique
  value        String?
  user         User          @relation(fields: [userId], references: [id])
  userId       Int
}
